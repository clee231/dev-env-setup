---
# tasks file for common_install
# Create SSH keygen
- name: Check if SSH key exists
  ansible.builtin.stat:
    path: /home/{{ansible_env.USER}}/.ssh/id_rsa
  register: keygen_check

- name: Generate SSH key
  when: keygen_check.stat.exists == False
  community.crypto.openssh_keypair:
    path: /home/{{ansible_env.USER}}/.ssh/id_rsa

# Install sexy-bash-prompt
- name: Check if bash prompt is set
  ansible.builtin.stat:
    path: /home/{{ansible_env.USER}}/.bash_prompt
  register: prompt_check

- name: Install sexy bash prompt
  ansible.builtin.git:
    repo: 'git@github.com:twolfson/sexy-bash-prompt.git'
    dest: /tmp/sexy-bash-prompt
  when: prompt_check.stat.exists == False

- name: Make sexy bash prompt
  community.general.make:
    chdir: /tmp/sexy-bash-prompt
    target: install
  when: prompt_check.stat.exists == False

# Install nvim
- name: Install nvim
  ansible.builtin.package:
    name: neovim
    state: present
  become: true

# TODO:Configure nvim with plugins and configuration

# Install tmux
- name: Install tmux
  ansible.builtin.package:
    name: tmux
    state: present
  become: true

# TODO: Create tmux layouts and config
